(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82379,e=>{"use strict";var s=e.i(72069),t=e.i(10982),a=e.i(11566),n=e.i(81230);function i(e){return(0,n.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}var l=e.i(72871),r=e.i(39319);let c="https://matrimonial-backend-7ahc.onrender.com";function o(){for(let e of["token","auth","user","matrimonial_token","accessToken"]){let s=localStorage.getItem(e);if(s)try{let e=JSON.parse(s),t=function e(s){if(!s)return null;if("string"==typeof s)return 3===s.split(".").length||s.length>10?s:null;if("object"==typeof s)for(let t of Object.keys(s)){let a=e(s[t]);if(a)return a}return null}(e);if(t)return t}catch{if(3===s.split(".").length||s.length>20)return s}}return null}function d({message:e,type:t="info",onClose:a}){return(0,s.jsx)("div",{className:`fixed right-6 top-6 z-50 px-4 py-2 text-white rounded ${"success"===t?"bg-green-600":"error"===t?"bg-red-600":"bg-gray-700"} shadow-lg`,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-sm",children:e}),(0,s.jsx)("button",{onClick:a,className:"text-white/90",children:"✕"})]})})}function m({title:e,onClose:t,children:a}){return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:t}),(0,s.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-[0_12px_40px_rgba(0,0,0,0.25)] w-full max-w-2xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:e}),(0,s.jsx)("button",{onClick:t,className:"w-9 h-9 rounded-full border flex items-center justify-center text-gray-600 hover:bg-gray-50","aria-label":"Close",children:"✕"})]}),a]})]})}function g({checked:e,onChange:t}){return(0,s.jsx)("button",{onClick:()=>t(!e),className:`w-12 h-7 rounded-full p-1 flex items-center transition-all ${e?"bg-[#3b46ff] justify-end":"bg-gray-300 justify-start"}`,"aria-pressed":e,children:(0,s.jsx)("span",{className:"w-5 h-5 bg-white rounded-full shadow-sm"})})}function x({children:e,onEdit:t}){return(0,s.jsxs)("div",{className:"relative bg-[#fbf0e8] border border-[#d8cfc6] rounded-lg p-6 shadow-sm",children:[t&&(0,s.jsx)("div",{className:"absolute top-4 right-4 cursor-pointer p-2 rounded border bg-white",onClick:t,children:(0,s.jsx)(i,{})}),e]})}function u({defaultValues:e,onSave:a,onClose:n}){let[i,l]=(0,t.useState)({name:e.name||"",email:e.email||"",phone:e.phone||"",assignedRegion:e.assignedRegion||""}),[r,c]=(0,t.useState)(null),[o,d]=(0,t.useState)(e.profileImage||null);(0,t.useEffect)(()=>{l({name:e.name||"",email:e.email||"",phone:e.phone||"",assignedRegion:e.assignedRegion||""}),d(e.profileImage||null)},[e]);let g=async e=>{e.preventDefault(),await a({...i,profileImage:r}),n()};return(0,s.jsx)(m,{title:"Edit Basic Info",onClose:n,children:(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("label",{className:"flex flex-col text-sm",children:[(0,s.jsx)("span",{className:"mb-1 text-gray-700",children:"Full Name"}),(0,s.jsx)("input",{className:"border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-blue-200",value:i.name,onChange:e=>l({...i,name:e.target.value})})]}),(0,s.jsxs)("label",{className:"flex flex-col text-sm",children:[(0,s.jsx)("span",{className:"mb-1 text-gray-700",children:"E-mail address"}),(0,s.jsx)("input",{type:"email",className:"border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-blue-200",value:i.email,onChange:e=>l({...i,email:e.target.value})})]}),(0,s.jsxs)("label",{className:"flex flex-col text-sm",children:[(0,s.jsx)("span",{className:"mb-1 text-gray-700",children:"Phone"}),(0,s.jsx)("input",{className:"border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-blue-200",value:i.phone,onChange:e=>l({...i,phone:e.target.value})})]}),(0,s.jsxs)("label",{className:"flex flex-col text-sm",children:[(0,s.jsx)("span",{className:"mb-1 text-gray-700",children:"Assigned Region"}),(0,s.jsx)("input",{className:"border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-blue-200",value:i.assignedRegion,onChange:e=>l({...i,assignedRegion:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:o?(0,s.jsx)("img",{src:o,alt:"preview",className:"w-20 h-20 rounded-full object-cover border"}):(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-100 border flex items-center justify-center text-sm text-gray-500",children:"No Image"})}),(0,s.jsxs)("div",{className:"flex-1 text-sm",children:[(0,s.jsx)("div",{className:"text-gray-700 mb-1",children:"Profile Image"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>(e=>{if(e){c(e);try{d(URL.createObjectURL(e))}catch{d(null)}}})(e.target.files[0]),className:"text-sm"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-full bg-red-600 text-white shadow",children:"Discard"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-full bg-green-600 text-white shadow",children:"Save"})]})]})})}function f({defaultValues:e,onSave:a,onClose:n}){let[i,r]=(0,t.useState)({newPassword:"",twoFactor:!!e.twoFactor,recentLoginDevice:e.recentLoginDevice||"",suspiciousLoginAlert:!!e.suspiciousLoginAlert}),[c,o]=(0,t.useState)(!1);(0,t.useEffect)(()=>{r({newPassword:"",twoFactor:!!e.twoFactor,recentLoginDevice:e.recentLoginDevice||"",suspiciousLoginAlert:!!e.suspiciousLoginAlert})},[e]);let d=async e=>{e.preventDefault(),await a(i),n()};return(0,s.jsx)(m,{title:"Security Settings",onClose:n,children:(0,s.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Change Password :"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:c?"text":"password",className:"flex-1 border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-blue-200",placeholder:"Enter new password",value:i.newPassword,onChange:e=>r({...i,newPassword:e.target.value})}),(0,s.jsx)("button",{type:"button",onClick:()=>o(e=>!e),className:"p-2 rounded border flex items-center justify-center",children:c?(0,s.jsx)(l.AiOutlineEyeInvisible,{}):(0,s.jsx)(l.AiOutlineEye,{})})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-sm text-gray-700 mb-1",children:"Two Factor Authentication :"})}),(0,s.jsx)(g,{checked:i.twoFactor,onChange:e=>r({...i,twoFactor:e})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-700 mb-1 block",children:"Recent login Device"}),(0,s.jsx)("input",{className:"w-full border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-blue-200",value:i.recentLoginDevice,onChange:e=>r({...i,recentLoginDevice:e.target.value})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-sm text-gray-700 mb-1",children:"Alert on suspicious login"})}),(0,s.jsx)(g,{checked:i.suspiciousLoginAlert,onChange:e=>r({...i,suspiciousLoginAlert:e})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-2",children:[(0,s.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-full bg-red-600 text-white shadow",children:"Discard"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-full bg-green-600 text-white shadow",children:"Save"})]})]})})}function h({defaultValues:e,onSave:a,onClose:n}){let[i,l]=(0,t.useState)({language:e.language||"English",theme:e.theme||"light",notifications:!!e.notifications,landingPage:e.landingPage||"Dashboard"});(0,t.useEffect)(()=>{l({language:e.language||"English",theme:e.theme||"light",notifications:!!e.notifications,landingPage:e.landingPage||"Dashboard"})},[e]);let r=async e=>{e.preventDefault(),await a(i),n()};return(0,s.jsx)(m,{title:"Preferences / Personalization",onClose:n,children:(0,s.jsxs)("form",{onSubmit:r,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 items-center gap-6",children:[(0,s.jsx)("span",{className:"text-[18px] font-bold  text-gray-700",children:"Default landing page"}),(0,s.jsx)("input",{className:"border rounded px-3 py-2 w-full outline-none focus:ring-2 focus:ring-blue-200",value:i.landingPage,onChange:e=>l({...i,landingPage:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 items-center gap-6",children:[(0,s.jsx)("span",{className:"text-[18px] font-bold text-gray-700",children:"Notifications"}),(0,s.jsx)(g,{checked:i.notifications,onChange:e=>l({...i,notifications:e})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-full bg-red-600 text-white shadow",children:"Discard"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 rounded-full bg-green-600 text-white shadow",children:"Save"})]})]})})}function p(){let[e,n]=(0,t.useState)({}),[i,l]=(0,t.useState)(!0),[m,p]=(0,t.useState)(!1),[j,y]=(0,t.useState)(!1),[N,b]=(0,t.useState)(!1),[v,w]=(0,t.useState)(null),S=async()=>{try{let e=o(),s=await fetch(`${c}/admin/profile`,{headers:e?{Authorization:`Bearer ${e}`}:{}}),t=await s.json();if(t.success)n(t.data||{}),localStorage.setItem("admin_profile",JSON.stringify(t.data||{})),window.dispatchEvent(new Event("adminProfileUpdated"));else{let e=localStorage.getItem("admin_profile");e&&n(JSON.parse(e))}}catch(s){let e=localStorage.getItem("admin_profile");e&&n(JSON.parse(e))}finally{l(!1)}};(0,t.useEffect)(()=>{S()},[]),(0,t.useEffect)(()=>{if(!i&&e&&e.notifications)try{(0,r.connectSocket)(e._id||e.id||"")}catch(e){console.warn("Socket connect failed on load",e)}return()=>{}},[i,e]);let _=async e=>{try{let s=o(),t=new FormData;t.append("name",e.name),t.append("email",e.email),t.append("assignedRegion",e.assignedRegion),t.append("phone",e.phone),e.profileImage&&t.append("profileImage",e.profileImage);let a=await fetch(`${c}/admin/profile/basic`,{method:"PUT",headers:s?{Authorization:`Bearer ${s}`}:{},body:t}),n=await a.json();n.success?(w({type:"success",message:"Basic info updated!"}),localStorage.setItem("admin_profile",JSON.stringify(n.data||{})),window.dispatchEvent(new Event("adminProfileUpdated")),S()):w({type:"error",message:n.message||"Failed to update"})}catch(e){w({type:"error",message:"Network error"})}},k=async e=>{try{let s=o(),t=await fetch(`${c}/admin/profile/security`,{method:"PUT",headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},body:JSON.stringify(e)}),a=await t.json();a.success?(w({type:"success",message:"Security updated!"}),localStorage.setItem("admin_profile",JSON.stringify(a.data||{})),window.dispatchEvent(new Event("adminProfileUpdated")),S()):w({type:"error",message:a.message||"Failed to update"})}catch(e){w({type:"error",message:"Network error"})}},C=async s=>{try{let t=o(),a=await fetch(`${c}/admin/profile/preferences`,{method:"PUT",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify(s)}),i=await a.json();if(i.success){w({type:"success",message:"Preferences updated!"});let t={...e||{},...s};n(t),localStorage.setItem("admin_profile",JSON.stringify(t)),window.dispatchEvent(new Event("adminProfileUpdated")),!0===s.notifications?(0,r.connectSocket)(t._id||t.id||""):(0,r.disconnectSocket)(),S()}else w({type:"error",message:i.message||"Failed to update"})}catch(e){w({type:"error",message:"Network error"})}},P=async s=>{try{let t=o(),a=await fetch(`${c}/admin/profile/preferences`,{method:"PUT",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({notifications:s})}),i=await a.json();if(i.success){let t={...e||{},notifications:s};n(t),localStorage.setItem("admin_profile",JSON.stringify(t)),window.dispatchEvent(new Event("adminProfileUpdated")),s?(0,r.connectSocket)(t._id||t.id||""):(0,r.disconnectSocket)(),w({type:"success",message:s?"Notifications enabled":"Notifications disabled"})}else w({type:"error",message:i.message||"Failed to update notifications"})}catch(e){w({type:"error",message:"Network error"})}};return i?(0,s.jsx)("p",{className:"p-6",children:"Loading profile..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between p-4 bg-gray-100 shadow fixed top-0 w-full z-20",children:[(0,s.jsx)("h1",{className:"font-bold text-lg",children:"Admin Profile"}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsx)(a.default,{src:"/notification.png",alt:"",width:36,height:36})})]}),(0,s.jsxs)("div",{className:"mt-20 p-6 flex gap-10 max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"w-64 flex-shrink-0",children:[(0,s.jsx)("div",{className:"w-44 h-44 rounded-full overflow-hidden border",children:e.profileImage?(0,s.jsx)("img",{src:e.profileImage,className:"w-full h-full object-cover",alt:"admin"}):(0,s.jsx)(a.default,{src:"/profile.png",alt:"profile",width:176,height:176})}),(0,s.jsx)("button",{onClick:()=>p(!0),className:"mt-3 bg-green-600 text-white px-12 py-3 rounded shadow",children:"Edit profile"}),(0,s.jsx)("p",{className:"mt-3 font-bold",children:e.email}),(0,s.jsx)("div",{className:"mt-4 space-y-3 text-sm",children:(0,s.jsx)("div",{className:"flex items-center gap-2"})})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,s.jsxs)(x,{onEdit:()=>p(!0),children:[(0,s.jsx)("h2",{className:"font-semibold text-lg mb-3",children:"Basic Info"}),(0,s.jsxs)("div",{className:"space-y-3 text-[15px]",children:[(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"Full Name"}),(0,s.jsx)("span",{className:"text-gray-800 text-center text-lg",children:":"}),(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:e.name||"-"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"Role"}),(0,s.jsx)("span",{className:"text-gray-800 text-center text-lg",children:":"}),(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:e.role||"Super Admin"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"E-mail address"}),(0,s.jsx)("span",{className:"text-gray-800 text-center text-lg",children:":"}),(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:e.email||"-"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"Phone"}),(0,s.jsx)("span",{className:"text-gray-800 text-center text-lg",children:":"}),(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:e.phone||"-"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"Assigned Region"}),(0,s.jsx)("span",{className:"text-gray-800 text-center text-lg",children:":"}),(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:e.assignedRegion||"-"})]})]})]}),(0,s.jsxs)(x,{onEdit:()=>y(!0),children:[(0,s.jsx)("h2",{className:"font-semibold text-lg mb-3",children:"Security Setting"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"Change Password"}),(0,s.jsx)("span",{className:"text-gray-500 text-lg",children:":"}),(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:"••••••••"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"Two Factor Authentication"}),(0,s.jsx)("span",{className:"text-gray-500 text-lg"}),(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)(g,{checked:!!e.twoFactor,onChange:()=>{}})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"Recent login Device"}),(0,s.jsx)("span",{className:"text-gray-500 text-lg",children:":"}),(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:e.recentLoginDevice||"-"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"Alert on suspicious login"}),(0,s.jsx)("span",{className:"text-gray-500 text-lg"}),(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)(g,{checked:!!e.suspiciousLoginAlert,onChange:()=>{}})})]})]})]}),(0,s.jsxs)(x,{onEdit:()=>b(!0),children:[(0,s.jsx)("h2",{className:"font-semibold text-lg mb-4",children:"Preferences / Personalization"}),(0,s.jsxs)("div",{className:"space-y-3 text-[15px]",children:[(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"Default landing page"}),(0,s.jsx)("span",{className:"text-gray-800 text-center text-lg",children:":"}),(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:e.landingPage||"Dashboard"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:"Notifications"}),(0,s.jsx)("span",{className:"text-gray-800 text-center text-lg"}),(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)(g,{checked:!!e.notifications,onChange:e=>P(e)})})]})]})]})]})]}),m&&(0,s.jsx)(u,{defaultValues:e,onSave:_,onClose:()=>p(!1)}),j&&(0,s.jsx)(f,{defaultValues:e,onSave:k,onClose:()=>y(!1)}),N&&(0,s.jsx)(h,{defaultValues:e,onSave:C,onClose:()=>b(!1)}),v&&(0,s.jsx)(d,{message:v.message,type:v.type,onClose:()=>w(null)})]})}e.s(["default",()=>p],82379)},44335,(e,s,t)=>{let a="/adminprofile";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(82379)]),s.hot&&s.hot.dispose(function(){window.__NEXT_P.push([a])})}]);