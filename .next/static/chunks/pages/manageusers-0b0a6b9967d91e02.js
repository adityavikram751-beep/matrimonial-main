(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{151:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});let a="https://matrimonial-backend-7ahc.onrender.com"},4257:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/manageusers",function(){return s(5295)}])},5295:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(7876),r=s(4232),l=s(4587),n=s.n(l),c=s(5637),i=s(464);function o(e){let{profileCompleted:t,profileIncomplete:s}=e,r=e=>{let{title:t,value:s,change:r,trend:l}=e;return(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"text-xl font-semibold text-gray-900",children:t}),(0,a.jsx)("div",{className:"text-4xl font-bold text-gray-900 mt-1",children:s>=1e6?(s/1e6).toFixed(1)+" M":s>=1e3?(s/1e3).toFixed(1)+" K":s.toString()}),(0,a.jsxs)("div",{className:"flex items-center justify-center mt-2 ".concat("up"===l?"text-green-600":"text-red-600"),children:["up"===l?(0,a.jsx)(c.A,{size:30,className:"mr-2"}):(0,a.jsx)(i.A,{size:30,className:"mr-2"}),(0,a.jsxs)("div",{className:"flex flex-col text-[15px] leading-tight font-bold",children:[(0,a.jsxs)("span",{children:[" ",Math.abs(r)," % Vs"]}),(0,a.jsx)("span",{className:"font-normal",children:"last week"})]})]})]})};return(0,a.jsx)("div",{className:"bg-white border border-gray-400 shadow-sm rounded-2xl px-4 py-4 w-full max-w-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(r,{title:"Profile Com.",value:t.count,change:t.change,trend:t.trend}),(0,a.jsx)("div",{className:"w-[2px] h-[75px] bg-gray-300 mx-4"}),(0,a.jsx)(r,{title:"Profile Incom.",value:s.count,change:s.change,trend:s.trend})]})})}var d=s(2671);function x(e){var t;let{data:s}=e,r=Array.isArray(s.profileImage)?s.profileImage:[];return(0,a.jsxs)("div",{className:"relative bg-white border border-gray-400 rounded-2xl shadow-sm p-4 w-full max-w-sm",children:[(0,a.jsx)("img",{src:"/mnt/data/Frame 84.png",className:"absolute right-3 top-3 w-20 h-10 opacity-80 pointer-events-none",alt:"",onError:e=>e.target.style.display="none"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-green-700 text-white rounded-sm text-xs font-bold",children:"✔"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900 text-xl",children:"Approved Profile"})]}),(0,a.jsx)("div",{className:"mt-2 text-4xl font-extrabold text-gray-900 leading-tight",children:(t=s.count)?t>=1e6?(t/1e6).toFixed(2)+" M":t>=1e3?(t/1e3).toFixed(2)+" K":t.toLocaleString():"0"}),(0,a.jsxs)("div",{className:"absolute right-4 top-16 flex items-start text-green-600 font-semibold",children:[(0,a.jsx)(c.A,{size:32,className:"mr-2"}),(0,a.jsxs)("div",{className:"flex flex-col leading-tight text-green-600 text-xl",children:[(0,a.jsxs)("span",{children:[s.change,"% Vs"]}),(0,a.jsx)("span",{className:"font-normal",children:"last week"})]})]}),(0,a.jsx)("div",{className:"flex -space-x-3 mt-8",children:r.length>0?r.map((e,t)=>(0,a.jsx)("img",{src:e,className:"w-9 h-9 rounded-full border-2 border-green-600 object-cover shadow-sm",alt:"Profile",onError:e=>e.target.style.display="none"},t)):[...Array(8)].map((e,t)=>(0,a.jsx)("div",{className:"w-9 h-9 rounded-full bg-gray-200 flex items-center justify-center border-2 border-white text-gray-500 shadow-sm",children:(0,a.jsx)(d.A,{size:16})},t))})]})}var m=s(9119);function h(e){var t;let{data:s}=e,r=Array.isArray(s.profileImage)?s.profileImage:[];return(0,a.jsxs)("div",{className:"bg-white border border-gray-400 rounded-xl shadow-sm px-5 py-4 w-full max-w-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-7 h-7 rounded-full bg-yellow-400 flex items-center justify-center",children:(0,a.jsx)(m.A,{size:14,className:"text-white"})}),(0,a.jsx)("span",{className:"font-bold text-gray-900 text-xl",children:"Pending Profile"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("div",{className:"text-4xl font-bold text-gray-900",children:(t=s.count)>=1e6?(t/1e6).toFixed(2)+" M":t>=1e3?(t/1e3).toFixed(2)+" K":t}),(0,a.jsxs)("div",{className:"flex flex-col items-end leading-tight text-red-600",children:[(0,a.jsxs)("div",{className:"flex items-center font-bold text-xl",children:[(0,a.jsx)(i.A,{size:34,className:"mr-1"}),(0,a.jsxs)("span",{children:[Math.abs(s.change)," % Vs"]})]}),(0,a.jsx)("span",{className:"text-xl",children:"last week"})]})]}),(0,a.jsx)("div",{className:"flex items-center mt-4 -space-x-2",children:r.map((e,t)=>(0,a.jsx)("img",{src:e,alt:"profile",className:"w-9 h-9 rounded-full border-2 border-red-600 object-cover shadow",onError:e=>e.target.style.display="none"},t))})]})}var p=s(9516),u=s(8230),g=s.n(u),j=s(151);function f(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(""),[c,i]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[x,m]=(0,r.useState)(1),[h,u]=(0,r.useState)(1),[f,N]=(0,r.useState)(!0),b=async()=>{N(!0);try{let e=new URLSearchParams({page:x,limit:5,search:s,statusFilter:c,genderFilter:o}),a=await fetch("".concat(j.H,"/admin/user-manage?").concat(e)),r=await a.json();r.success&&(t(r.data),u(r.totalPages))}catch(e){console.log("Fetch Error",e)}finally{N(!1)}};return(0,r.useEffect)(()=>{b()},[x,s,c,o]),(0,a.jsxs)("div",{className:"overflow-x-auto bg-white border border-gray-400 shadow-md rounded-xl p-4 mt-4 w-full",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center bg-gray-100 border p-2 rounded border-gray-400 justify-between gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"relative w-full md:w-1/3",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search By User",value:s,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-gray-400 rounded-md text-sm"}),(0,a.jsx)(p.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{value:c,onChange:e=>i(e.target.value),className:"border border-gray-400 bg-gray-200 text-sm rounded-md px-3 py-2 cursor-pointer",children:[(0,a.jsx)("option",{value:"",children:"Status"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"blocked",children:"Blocked"}),(0,a.jsx)("option",{value:"reject",children:"Rejected"})]}),(0,a.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"border border-gray-400 bg-gray-200 text-sm rounded-md px-3 py-2 cursor-pointer",children:[(0,a.jsx)("option",{value:"",children:"Gender"}),(0,a.jsx)("option",{value:"Male",children:"Male"}),(0,a.jsx)("option",{value:"Female",children:"Female"}),(0,a.jsx)("option",{value:"N/A",children:"N/A"})]})]})]}),f&&(0,a.jsx)("p",{className:"flex justify-center py-4",children:(0,a.jsx)(n(),{src:"/loading2.gif",width:90,height:90,alt:"loading"})}),!f&&e.length>0&&(0,a.jsxs)("table",{className:"min-w-full text-sm border border-gray-300",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-gray-700 font-medium",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border",children:"User Name"}),(0,a.jsx)("th",{className:"p-2 border",children:"Location"}),(0,a.jsx)("th",{className:"p-2 border",children:"Joined"}),(0,a.jsx)("th",{className:"p-2 border text-center",children:"Verified"}),(0,a.jsx)("th",{className:"p-2 border text-center",children:"Last Active"}),(0,a.jsx)("th",{className:"p-2 border text-center",children:"Status"}),(0,a.jsx)("th",{className:"p-2 border text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:e.map((e,t)=>(0,a.jsxs)("tr",{className:"text-gray-700",children:[(0,a.jsx)("td",{className:"p-2 border",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("img",{src:e.profileImage,className:"w-10 h-10 rounded-full object-cover",alt:"avatar"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:e.fullName}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.id," / ",e.gender]})]})]})}),(0,a.jsx)("td",{className:"p-2 border",children:e.location}),(0,a.jsx)("td",{className:"p-2 border",children:e.joined}),(0,a.jsx)("td",{className:"p-2 border text-center",children:e.mobile?(0,a.jsx)("span",{className:"text-green-600 font-semibold",children:"✔ Yes"}):(0,a.jsx)("span",{className:"text-red-600 font-semibold",children:"✘ No"})}),(0,a.jsx)("td",{className:"p-2 border text-center",children:e.lastActive}),(0,a.jsx)("td",{className:"p-2 border text-center",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full ".concat("approved"===e.status?"bg-green-600":"pending"===e.status?"bg-yellow-500":"blocked"===e.status?"bg-red-600":"bg-gray-500")}),(0,a.jsx)("span",{className:"font-medium capitalize",children:e.status})]})}),(0,a.jsx)("td",{className:"p-2 border text-center",children:(0,a.jsx)(g(),{href:"/manageusers/".concat(e.mongoId),children:(0,a.jsx)("span",{className:"text-black hover:underline cursor-pointer",children:"View"})})})]},t))})]}),!f&&(0,a.jsxs)("div",{className:"flex justify-center items-center mt-4 text-sm text-gray-700 space-x-2",children:[(0,a.jsx)("button",{onClick:()=>m(e=>Math.max(1,e-1)),className:"px-2",children:"◄"}),(0,a.jsx)("button",{onClick:()=>m(e=>Math.max(1,e-1)),className:"px-2",children:"Prev"}),(0,a.jsx)("span",{children:"|"}),(()=>{let e=4*Math.floor((x-1)/4)+1,t=Math.min(e+3,h),s=[];for(let a=e;a<=t;a++)s.push(a);return s})().map(e=>(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>m(e),className:x===e?"font-bold underline text-black":"text-gray-700",children:e}),(0,a.jsx)("span",{className:"px-1",children:"|"})]},e)),h>4&&(0,a.jsx)("span",{children:"….."}),(0,a.jsx)("button",{onClick:()=>m(e=>Math.min(h,e+1)),className:"px-2",children:"Next"}),(0,a.jsx)("button",{onClick:()=>m(e=>Math.min(h,e+1)),className:"px-2",children:"►"})]})]})}var N=s(9812),b=s(7085),v=s.n(b);function y(){let e,[t,s]=(0,r.useState)([]),[l,n]=(0,r.useState)(""),[c,i]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),[h,u]=(0,r.useState)(!0),[g,f]=(0,r.useState)(1),[b,y]=(0,r.useState)(1),w=async()=>{try{let e="".concat(j.H,"/admin/user-manage-get?search=").concat(l,"&status=").concat(c,"&gender=").concat(o,"&sortField=").concat(x,"&sortOrder=").concat(h?"asc":"desc","&page=").concat(g,"&limit=").concat(5),t=await fetch(e),a=await t.json();s(a.users||[]),y(a.totalPages||1)}catch(e){console.error("Error fetching users:",e)}};(0,r.useEffect)(()=>{w()},[l,c,o,x,h,g]);let k=e=>{x===e?u(!h):(m(e),u(!0))};return(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-xl p-4 border border-gray-400 w-full mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-col border p-2 rounded bg-gray-100 border-gray-400 md:flex-row md:items-center justify-between gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"relative w-full md:w-1/3",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search By User Name",value:l,onChange:e=>{n(e.target.value),f(1)},className:"w-full pl-10 pr-4 py-2  bg-white border border-gray-300 rounded-md text-sm"}),(0,a.jsx)(p.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsxs)("select",{value:c,onChange:e=>{i(e.target.value),f(1)},className:"border border-gray-400 bg-gray-200 cursor-pointer hover:bg-gray-300 text-sm rounded-md px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"Status"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"reject",children:"Reject"})]}),(0,a.jsxs)("select",{value:o,onChange:e=>{d(e.target.value),f(1)},className:"border border-gray-400 bg-gray-200 cursor-pointer hover:bg-gray-300 text-sm rounded-md px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"Gender"}),(0,a.jsx)("option",{value:"Male",children:"Male"}),(0,a.jsx)("option",{value:"Female",children:"Female"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([v().unparse(t)],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(e),s.download="users.csv",s.click()},className:"px-3 py-2 text-sm border border-gray-400 bg-gray-200 cursor-pointer hover:bg-gray-300 rounded-md flex items-center gap-1",children:[(0,a.jsx)(N.A,{size:16})," Export CSV"]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm border border-gray-300 text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-100 text-gray-600",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2",children:"User ID"}),(0,a.jsx)("th",{className:"p-2 cursor-pointer",onClick:()=>k("name"),children:"User Name ⬍"}),(0,a.jsx)("th",{className:"p-2 cursor-pointer",onClick:()=>k("location"),children:"Location ⬍"}),(0,a.jsx)("th",{className:"p-2 cursor-pointer",onClick:()=>k("gender"),children:"Gender ⬍"}),(0,a.jsx)("th",{className:"p-2 cursor-pointer",onClick:()=>k("joined"),children:"Joined ⬍"}),(0,a.jsx)("th",{className:"p-2",children:"Verified"}),(0,a.jsx)("th",{className:"p-2",children:"Status"}),(0,a.jsx)("th",{className:"p-2",children:"Last Active"})]})}),(0,a.jsx)("tbody",{children:t.map((e,t)=>{var s,r;return(0,a.jsxs)("tr",{className:"border-t border-gray-300 text-gray-600",children:[(0,a.jsx)("td",{className:"p-2",children:e.id}),(0,a.jsx)("td",{className:"p-2",children:e.name}),(0,a.jsx)("td",{className:"p-2",children:e.location||"Not Mention"}),(0,a.jsx)("td",{className:"p-2",children:e.gender||"Not Mention"}),(0,a.jsx)("td",{className:"p-2",children:e.joined}),(0,a.jsx)("td",{className:"p-2",children:!0===e.verified||"true"===e.verified?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-block w-6 h-6 bg-green-700 text-white rounded-sm flex items-center justify-center",children:"✔"}),"Yes"]}):(0,a.jsx)("div",{className:"flex items-center gap-2 text-red-600",children:(0,a.jsx)("span",{className:"font-bold",children:"✘ No"})})}),(0,a.jsx)("td",{className:"p-2",children:(0,a.jsxs)("span",{className:"flex items-center gap-1 ".concat("Approved"===(s=e.status)?"text-green-600":"Pending"===s?"text-yellow-500":"text-red-600"),children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("Approved"===(r=e.status)?"bg-green-500":"Pending"===r?"bg-yellow-400":"bg-red-500")}),e.status]})}),(0,a.jsx)("td",{className:"p-2",children:e.lastActive})]},t)})})]})}),(0,a.jsxs)("div",{className:"flex justify-center items-center mt-4 text-sm text-gray-700 space-x-3",children:[(0,a.jsx)("button",{onClick:()=>f(e=>Math.max(1,e-1)),className:"px-2",children:"◄"}),(0,a.jsx)("button",{onClick:()=>f(e=>Math.max(1,e-1)),className:"px-2",children:"Prev"}),(0,a.jsx)("span",{children:"|"}),Array.from({length:Math.min((e=Math.max(1,g-3))+3,b)-e+1},(t,s)=>{let r=e+s;return(0,a.jsxs)("span",{onClick:()=>f(r),className:"cursor-pointer px-1 ".concat(g===r?"font-semibold":""),children:[r," ",(0,a.jsx)("span",{children:"|"})]},r)}),b>4&&(0,a.jsx)("span",{children:"….."}),(0,a.jsx)("span",{children:"|"}),(0,a.jsx)("button",{onClick:()=>f(e=>Math.min(b,e+1)),className:"px-2",children:"Next"}),(0,a.jsx)("button",{onClick:()=>f(e=>Math.min(b,e+1)),className:"px-2",children:"►"})]})]})}function w(e){let{totalUsers:t,newSignups:s}=e,r=e=>{let{change:t,trend:s}=e,r="up"===s;return(0,a.jsxs)("div",{className:"flex items-start gap-[6px] mt-[6px]",children:[r?(0,a.jsx)(c.A,{size:30,className:"text-green-600 mt-[2px]"}):(0,a.jsx)(i.A,{size:30,className:"text-red-600 mt-[2px]"}),(0,a.jsxs)("div",{className:"flex flex-col leading-[15px]",children:[(0,a.jsxs)("span",{className:"text-[16px] font-semibold ".concat(r?"text-green-600":"text-red-600"),children:[Math.abs(t)," % Vs"]}),(0,a.jsx)("span",{className:"text-[15px] ".concat(r?"text-green-600":"text-red-600"),children:"last week"})]})]})},l=e=>{let{title:t,value:s,change:l,trend:n}=e;return(0,a.jsxs)("div",{className:"flex-1 text-center",children:[(0,a.jsx)("div",{className:"text-[18px] font-bold text-gray-700 whitespace-nowrap",children:t}),(0,a.jsx)("div",{className:"text-[32px] font-bold text-gray-900",children:s>=1e6?(s/1e6).toFixed(1)+" M":s>=1e3?(s/1e3).toFixed(1)+" K":s.toLocaleString()}),(0,a.jsx)(r,{change:l,trend:n})]})};return(0,a.jsx)("div",{className:"bg-white border border-gray-400 shadow rounded-xl px-6 py-4 w-full max-w-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(l,{title:"Total users",value:t.count,change:t.change,trend:t.trend}),(0,a.jsx)("div",{className:"w-[2px] h-[60px] bg-gray-300 mx-2"}),(0,a.jsx)(l,{title:"New Signups",value:s.count,change:s.change,trend:s.trend})]})})}var k=s(7814);let S=()=>{let[e,t]=(0,r.useState)(""),[s,l]=(0,r.useState)([]),[n,c]=(0,r.useState)(0),[i,o]=(0,r.useState)(!1),d=(0,r.useRef)(null),x="https://matrimonial-backend-7ahc.onrender.com",m=async()=>{try{let e=localStorage.getItem("token"),t=await fetch("".concat(x,"/admin/profile"),{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();if(!s.success)return;let a=s.data;!0===a.notifications?(0,k.cH)(a._id):(0,k.G1)()}catch(e){console.log("Admin Pref Error:",e)}};(0,r.useEffect)(()=>{m()},[]);let h=async()=>{try{let e=localStorage.getItem("token"),t=await fetch("".concat(x,"/api/notification/me"),{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();if(s.success){let e=s.data.reverse();l(e),c(e.filter(e=>!e.read).length)}}catch(e){console.log("Notification Fetch Error:",e)}};(0,r.useEffect)(()=>{h()},[]),(0,r.useEffect)(()=>{let e=(0,k.Ol)();if(e)return console.log("\uD83D\uDFE2 REAL-TIME SOCKET ACTIVE (Manage Users)"),e.on("new-notification",e=>{l(t=>[e,...t]),c(e=>e+1)}),e.on("one-read",e=>{let{id:t}=e;l(e=>e.map(e=>e._id===t?{...e,read:!0}:e)),c(e=>Math.max(e-1,0))}),e.on("all-read",()=>{l(e=>e.map(e=>({...e,read:!0}))),c(0)}),e.on("delete-one",e=>{let{id:t}=e;l(e=>e.filter(e=>e._id!==t)),c(e=>Math.max(e-1,0))}),e.on("delete-all",()=>{l([]),c(0)}),()=>{e.off("new-notification"),e.off("one-read"),e.off("all-read"),e.off("delete-one"),e.off("delete-all")}},[]);let p=async e=>{var t;let s=localStorage.getItem("token");l(t=>t.map(t=>t._id===e?{...t,read:!0}:t)),c(e=>Math.max(e-1,0)),await fetch("".concat(x,"/api/notification/mark-read/").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s)}}),null==(t=(0,k.Ol)())||t.emit("one-read",{id:e})},u=async()=>{var e;let t=localStorage.getItem("token");l(e=>e.map(e=>({...e,read:!0}))),c(0),await fetch("".concat(x,"/api/notification/mark-all"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}}),null==(e=(0,k.Ol)())||e.emit("all-read")},g=async e=>{var t;let s=localStorage.getItem("token");l(t=>t.filter(t=>t._id!==e)),await fetch("".concat(x,"/api/notification/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}}),null==(t=(0,k.Ol)())||t.emit("delete-one",{id:e})},j=async()=>{var e;let t=localStorage.getItem("token");l([]),c(0),await fetch("".concat(x,"/api/notification/delete-all"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),null==(e=(0,k.Ol)())||e.emit("delete-all")};return(0,r.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsxs)("div",{className:"bg-gray-100 px-6 py-4 shadow-sm border-b fixed top-0 z-50 flex items-center justify-between",style:{left:"250px",width:"calc(100% - 250px)"},children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Users"}),(0,a.jsx)("div",{className:"flex items-center gap-5",children:(0,a.jsxs)("div",{className:"relative",ref:d,children:[(0,a.jsxs)("div",{className:"cursor-pointer",onClick:()=>{let e=!i;o(e),e&&u()},children:[(0,a.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"#FFC107",children:(0,a.jsx)("path",{d:"M12 24c1.104 0 2-.897 2-2h-4c0 1.103.896 2 2 2zm6.707-5l1.293 1.293V21H4v-1.707L5.293 19H6v-7c0-3.309 2.691-6 6-6s6 2.691 6 6v7h.707zM18 18H6v-7c0-2.757 2.243-5 5-5s5 2.243 5 5v7z"})}),n>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 h-4 w-4 text-[10px] flex items-center justify-center bg-red-600 text-white rounded-full",children:n})]}),i&&(0,a.jsxs)("div",{className:"absolute right-0 mt-3 w-80 bg-white shadow-xl border rounded-lg max-h-96 overflow-y-auto p-3 z-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Notifications"}),(0,a.jsx)("button",{onClick:u,className:"text-blue-600 text-sm",children:"Mark all read"})]}),0===s.length?(0,a.jsx)("p",{className:"p-4 text-sm text-gray-500",children:"No notifications"}):s.map(e=>(0,a.jsxs)("div",{className:"border-b pb-3 mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"font-bold text-[15px] capitalize",children:e.title}),(0,a.jsx)("button",{onClick:()=>g(e._id),className:"text-red-600 text-xs",children:"Delete"})]}),(0,a.jsx)("p",{className:"text-gray-700 text-sm mt-1",children:e.message}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:new Date(e.createdAt).toLocaleString()}),!e.read&&(0,a.jsx)("button",{onClick:()=>p(e._id),className:"text-blue-600 text-xs mt-1",children:"Mark as read"})]},e._id)),s.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{className:"border-gray-300 my-2"}),(0,a.jsx)("button",{onClick:j,className:"w-full py-2 text-red-600 text-sm",children:"Delete All"})]})]})]})})]})},C=()=>{let[e,t]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat(j.H,"/admin/user-stats")),s=await e.json();t(s)}catch(e){console.error("Failed to fetch stats:",e)}})()},[]),e)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{}),(0,a.jsxs)("div",{className:"pt-[85px] p-8",children:[(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[(0,a.jsx)(w,{totalUsers:e.totalUsers,newSignups:e.newSignups}),(0,a.jsx)(o,{profileCompleted:e.profileCompleted,profileIncomplete:e.profileIncomplete}),(0,a.jsx)(x,{data:e.approvedProfiles}),(0,a.jsx)(h,{data:e.pendingProfiles})]}),(0,a.jsx)(f,{}),(0,a.jsx)(y,{})]})]}):(0,a.jsx)("div",{className:"p-4 mt-[280px] flex justify-center items-center",children:(0,a.jsx)(n(),{src:"/loading2.gif",height:200,width:200,alt:"Loading.."})})}},7814:(e,t,s)=>{"use strict";s.d(t,{G1:()=>n,Ol:()=>c,cH:()=>l});var a=s(2692);let r=null;function l(e){return r&&r.connected||((r=(0,a.io)("https://matrimonial-backend-7ahc.onrender.com",{transports:["websocket"],secure:!0,reconnection:!0,reconnectionAttempts:10,path:"/socket.io",query:{adminId:e}})).on("connect",()=>{console.log("\uD83D\uDD35 SOCKET CONNECTED:",r.id)}),r.on("disconnect",()=>{console.log("\uD83D\uDD34 SOCKET DISCONNECTED")})),r}function n(){r&&(r.disconnect(),console.log("\uD83D\uDD34 SOCKET MANUALLY DISCONNECTED"))}function c(){return r}}},e=>{e.O(0,[692,388,636,593,792],()=>e(e.s=4257)),_N_E=e.O()}]);