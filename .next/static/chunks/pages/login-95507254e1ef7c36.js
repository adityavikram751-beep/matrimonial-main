(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{151:(e,s,t)=>{"use strict";t.d(s,{H:()=>a});let a="https://matrimonial-backend-7ahc.onrender.com"},5745:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(8017)}])},8017:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(7876),r=t(8492);t(4232);let n=()=>(0,a.jsx)("div",{children:(0,a.jsx)(r.A,{})})},8492:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var a=t(7876),r=t(8992),n=t(4232),l=t(1040),i=t(151),o=t(8102);function d(){let[e,s]=(0,n.useState)(1),{register:t,handleSubmit:d,reset:c}=(0,r.mN)(),[u,h]=(0,n.useState)(""),[p,x]=(0,n.useState)(""),[m,w]=(0,n.useState)(["","","",""]),[g,b]=(0,n.useState)(!1),[f,j]=(0,n.useState)(""),[N,y]=(0,n.useState)(!1),[v,P]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),_=async e=>{b(!0),j("");let s=e.identifier,t=s.includes("@");try{let a=await l.A.post("".concat(i.H,"/auth/admin/login"),{[t?"email":"phone"]:s,password:e.password});localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify(a.data.user)),window.location.href="/dashboard"}catch(e){j("Invalid email/phone or password!")}b(!1)},A=async e=>{b(!0),j("");try{(await l.A.post("".concat(i.H,"/auth/admin/forgot-password"),{phone:e.phone})).data.success?(x(e.phone),s(3)):j("Failed to send OTP")}catch(e){j("Phone not found!")}b(!1)},C=async()=>{let e=m.join("");if(4!==e.length)return void j("Enter full OTP");b(!0),j("");try{(await l.A.post("".concat(i.H,"/auth/admin/verify-otp"),{phone:p,otp:e})).data.success?s(4):j("Invalid OTP!")}catch(e){j("Wrong OTP!")}b(!1)},E=async e=>{if(e.newPassword!==e.confirmPassword)return j("Passwords do not match");b(!0),j("");try{(await l.A.post("".concat(i.H,"/auth/admin/reset-password"),{phone:p,newPassword:e.newPassword,confirmPassword:e.confirmPassword})).data.success?(c(),s(1)):j("Password reset failed!")}catch(e){j("Something went wrong!")}b(!1)};return(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-black relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-cover bg-center blur-lg brightness-75",style:{backgroundImage:"url('/bg.png')"}}),(0,a.jsxs)("div",{className:"relative z-20 flex flex-col items-center",children:[(0,a.jsx)("img",{src:"/profile.png",className:"w-28 h-28 rounded-full border-4 border-white shadow-lg mb-4"}),(0,a.jsx)("h2",{className:"text-white text-2xl font-semibold",children:"ADITYA"}),(0,a.jsx)("p",{className:"text-gray-200 mb-8",children:"Super Admin"}),(0,a.jsxs)("div",{className:"w-[350px] bg-white/20 backdrop-blur-xl rounded-2xl shadow-xl p-8 border border-white/30",children:[1===e&&(0,a.jsxs)("form",{onSubmit:d(_),className:"space-y-4",children:[(0,a.jsx)("input",{...t("identifier",{required:!0}),placeholder:"Admin ID (Phone or Email)",className:"w-full px-4 py-3 rounded-xl bg-white/90 shadow-inner"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{...t("password",{required:!0}),type:N?"text":"password",placeholder:"Password",className:"w-full px-4 py-3 rounded-xl bg-white/90 shadow-inner"}),(0,a.jsx)("span",{onClick:()=>y(!N),className:"absolute right-3 top-3 cursor-pointer",children:N?(0,a.jsx)(o.rs7,{size:22}):(0,a.jsx)(o.yMb,{size:22})})]}),(0,a.jsx)("p",{onClick:()=>s(2),className:"text-black text-sm cursor-pointer underline",children:"Forgot Password ?"}),f&&(0,a.jsx)("p",{className:"text-red-400 text-sm",children:f}),(0,a.jsx)("button",{className:"w-full bg-red-700 hover:bg-red-800 text-white py-3 rounded-lg",children:g?"Loading...":"Login"})]}),2===e&&(0,a.jsxs)("form",{onSubmit:d(A),className:"space-y-4",children:[(0,a.jsx)("input",{...t("phone",{required:!0}),placeholder:"Enter Phone Number",className:"w-full px-4 py-3 rounded-xl bg-white/90 shadow-inner"}),f&&(0,a.jsx)("p",{className:"text-red-400 text-sm",children:f}),(0,a.jsx)("button",{className:"w-full bg-red-700 hover:bg-red-800 text-white py-3 rounded-lg",children:g?"Sending...":"Send OTP"})]}),3===e&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-center gap-3",children:m.map((e,s)=>(0,a.jsx)("input",{id:"otp-".concat(s),maxLength:1,value:e,onChange:e=>{var t;let a;return t=e.target.value,void((a=[...m])[s]=t.slice(-1),w(a),t&&s<3&&document.getElementById("otp-".concat(s+1)).focus())},className:"w-14 h-14 text-center rounded-xl bg-white/90 shadow-inner text-lg"},s))}),f&&(0,a.jsx)("p",{className:"text-red-400 text-sm",children:f}),(0,a.jsx)("button",{onClick:C,className:"w-full bg-red-700 hover:bg-red-800 text-white py-3 rounded-lg",children:g?"Verifying...":"Confirm OTP"})]}),4===e&&(0,a.jsxs)("form",{onSubmit:d(E),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{...t("newPassword",{required:!0}),type:v?"text":"password",placeholder:"Password",className:"w-full px-4 py-3 rounded-xl bg-white/90 shadow-inner"}),(0,a.jsx)("span",{onClick:()=>P(!v),className:"absolute right-3 top-3 cursor-pointer",children:v?(0,a.jsx)(o.rs7,{size:22}):(0,a.jsx)(o.yMb,{size:22})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{...t("confirmPassword",{required:!0}),type:S?"text":"password",placeholder:"Confirm Password",className:"w-full px-4 py-3 rounded-xl bg-white/90 shadow-inner"}),(0,a.jsx)("span",{onClick:()=>k(!S),className:"absolute right-3 top-3 cursor-pointer",children:S?(0,a.jsx)(o.rs7,{size:22}):(0,a.jsx)(o.yMb,{size:22})})]}),f&&(0,a.jsx)("p",{className:"text-red-400 text-sm",children:f}),(0,a.jsx)("button",{className:"w-full bg-red-700 hover:bg-red-800 text-white py-3 rounded-lg",children:g?"Updating...":"Login"})]})]})]})]})}}},e=>{e.O(0,[897,220,607,636,593,792],()=>e(e.s=5745)),_N_E=e.O()}]);