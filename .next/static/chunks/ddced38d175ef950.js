(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84819,e=>{"use strict";var t=e.i(72069),a=e.i(10982),l=e.i(91164),r=e.i(39319);let s=({onSearch:e})=>{let[s,i]=(0,a.useState)(""),[o,n]=(0,a.useState)([]),[c,d]=(0,a.useState)(0),[m,x]=(0,a.useState)(!1),h=(0,a.useRef)(null),u="https://matrimonial-backend-7ahc.onrender.com",f=async()=>{try{let e=localStorage.getItem("token"),t=await fetch(`${u}/admin/profile`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();if(a.success){let e=a.data;!0===e.notifications?(0,r.connectSocket)(e._id):(0,r.disconnectSocket)()}}catch(e){console.log("Admin Pref error:",e)}};(0,a.useEffect)(()=>{f()},[]);let p=async()=>{try{let e=localStorage.getItem("token"),t=await fetch(`${u}/api/notification/me`,{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();if(a.success){let e=a.data.reverse();n(e),d(e.filter(e=>!e.read).length)}}catch(e){console.log("Fetch Notification Error:",e)}};(0,a.useEffect)(()=>{p()},[]),(0,a.useEffect)(()=>{let e=(0,r.getSocket)();if(e)return console.log("ðŸŸ¢ Realtime Listener Enabled"),e.on("new-notification",e=>{n(t=>[e,...t]),d(e=>e+1)}),e.on("all-read",()=>{n(e=>e.map(e=>({...e,read:!0}))),d(0)}),e.on("one-read",({id:e})=>{n(t=>t.map(t=>t._id===e?{...t,read:!0}:t)),d(e=>Math.max(e-1,0))}),e.on("delete-one",({id:e})=>{n(t=>t.filter(t=>t._id!==e))}),e.on("delete-all",()=>{n([]),d(0)}),()=>{e.off("new-notification"),e.off("all-read"),e.off("one-read"),e.off("delete-one"),e.off("delete-all")}},[]);let g=()=>e(s.toLowerCase());(0,a.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let b=async()=>{let e=!m;x(e),e&&w()},w=async()=>{let e=localStorage.getItem("token");n(e=>e.map(e=>({...e,read:!0}))),d(0),await fetch(`${u}/api/notification/mark-all`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`}}),(0,r.getSocket)()?.emit("all-read")},v=async e=>{let t=localStorage.getItem("token");n(t=>t.map(t=>t._id===e?{...t,read:!0}:t)),d(e=>Math.max(0,e-1)),await fetch(`${u}/api/notification/mark-read/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`}}),(0,r.getSocket)()?.emit("one-read",{id:e})},y=async e=>{let t=localStorage.getItem("token");n(t=>t.filter(t=>t._id!==e)),await fetch(`${u}/api/notification/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),(0,r.getSocket)()?.emit("delete-one",{id:e})},j=async()=>{let e=localStorage.getItem("token");n([]),d(0),await fetch(`${u}/api/notification/delete-all`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),(0,r.getSocket)()?.emit("delete-all")};return(0,t.jsxs)("div",{className:"bg-gray-100 px-6 py-4 shadow-sm border-b fixed top-0 z-50 flex items-center justify-between",style:{left:"250px",width:"calc(100% - 250px)"},children:[(0,t.jsx)("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Profile Details"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 md:gap-5",children:[(0,t.jsxs)("div",{className:"flex items-center bg-white border border-gray-300 rounded-full px-4 py-2 w-[250px] md:w-[300px] lg:w-[350px] shadow-sm",children:[(0,t.jsx)(l.Search,{className:"text-gray-600 cursor-pointer",size:18,onClick:g}),(0,t.jsx)("input",{type:"text",placeholder:"Search...",className:"ml-2 w-full outline-none text-sm bg-transparent",value:s,onChange:t=>{i(t.target.value),e(t.target.value.toLowerCase())},onKeyDown:e=>"Enter"===e.key&&g()})]}),(0,t.jsxs)("div",{className:"relative",ref:h,children:[(0,t.jsxs)("div",{onClick:b,className:"cursor-pointer",children:[(0,t.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"#FFC107",className:"hover:fill-orange-500 transition-colors",children:(0,t.jsx)("path",{d:"M12 24c1.104 0 2-.897 2-2h-4c0 1.103.896 2 2 2zm6.707-5l1.293 1.293V21H4v-1.707L5.293 19H6v-7c0-3.309 2.691-6 6-6s6 2.691 6 6v7h.707z"})}),c>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-600 text-white text-[10px] flex items-center justify-center rounded-full border-2 border-white",children:c>9?"9+":c})]}),m&&(0,t.jsxs)("div",{className:"absolute right-0 mt-3 w-[300px] md:w-[330px] bg-white shadow-lg border rounded-lg p-3 z-50",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,t.jsx)("h2",{className:"font-bold text-lg",children:"Notifications"}),(0,t.jsx)("button",{onClick:w,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Mark all read"})]}),(0,t.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:0===o.length?(0,t.jsx)("div",{className:"text-center py-4",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No notifications"})}):o.map(e=>(0,t.jsx)("div",{className:`p-3 border-b hover:bg-gray-50 ${!e.read?"bg-yellow-50":""}`,children:(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,t.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleDateString()}),!e.read&&(0,t.jsx)("button",{onClick:()=>v(e._id),className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"Mark read"})]})]}),(0,t.jsx)("button",{onClick:()=>y(e._id),className:"text-red-500 hover:text-red-700 text-xs ml-2",title:"Delete",children:"âœ•"})]})},e._id))}),o.length>0&&(0,t.jsx)("div",{className:"border-t pt-2 mt-2",children:(0,t.jsx)("button",{onClick:j,className:"w-full py-2 text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete All"})})]})]})]})]})};var i=e.i(40271),o=e.i(81230);function n(e){return(0,o.GenIcon)({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"},child:[]}]})(e)}let c=({title:e,apiPath:l})=>{let[r,s]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)([]),[x,h]=(0,a.useState)([]),[u,f]=(0,a.useState)(null),[p,g]=(0,a.useState)(""),[b,w]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),j=`${i.API_URL}/api/master/${l}`;(0,a.useEffect)(()=>{N(),"city"===l&&S()},[]);let N=async()=>{try{let e=await fetch(j),t=await e.json();h(t)}catch(e){console.error("Error fetching options:",e)}},S=async()=>{try{let e=await fetch(`${i.API_URL}/api/master/state`),t=await e.json();m(t)}catch(e){console.error("Error fetching states:",e)}},C=async()=>{let e=r.trim();if(!e)return;if(x.some(t=>t.value.trim().toLowerCase()===e.toLowerCase()))return void y("This field has already been mentioned");let t="city"===l?{value:e,state:o}:{value:e};try{let e=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await e.json();h(e=>[...e,a]),s(""),c(""),y("")}catch(e){console.error("Error adding option:",e)}},k=async e=>{try{await fetch(`${j}/${e}`,{method:"DELETE"}),h(t=>t.filter(t=>t._id!==e))}catch(e){console.error("Error deleting option:",e)}};return(0,t.jsxs)("div",{className:"border-1 border-black mt-[50px] p-4 sm:p-6 rounded-xl shadow-sm bg-white w-full max-w-md mx-auto transition hover:shadow-md",children:[(0,t.jsx)("h1",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-4",children:e}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 mb-3",children:["city"===l&&(0,t.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-400 text-sm sm:text-base",children:[(0,t.jsx)("option",{value:"",children:"Select State"}),d.map(e=>(0,t.jsx)("option",{value:e.value,children:e.value},e._id))]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C()},className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("input",{type:"text",value:r,onChange:e=>{s(e.target.value),y("")},onKeyDown:e=>{"Enter"===e.key&&""!==r.trim()&&(e.preventDefault(),C())},placeholder:"Enter new value",className:"w-full p-3 border border-green-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-400 text-sm sm:text-base"}),v&&(0,t.jsx)("p",{className:"text-xs sm:text-sm text-red-500 mt-1",children:v})]}),(0,t.jsx)("button",{type:"button",onClick:C,className:"bg-red-800 border-1 border-black text-white rounded-lg hover:bg-rose-700 px-4 py-2 sm:px-6 sm:py-3 transition font-medium text-sm sm:text-base whitespace-nowrap",children:"Add"})]})]}),x.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 overflow-hidden",children:x.map(e=>(0,t.jsx)("div",{children:u===e._id?(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 p-2 border rounded-md",children:[(0,t.jsx)("input",{value:p,onChange:e=>g(e.target.value),className:"flex-1 p-2 border border-gray-300 rounded-md text-sm"}),"city"===l&&(0,t.jsx)("select",{value:b,onChange:e=>w(e.target.value),className:"p-2 border border-gray-300 rounded-md text-sm",children:d.map(e=>(0,t.jsx)("option",{value:e.value,children:e.value},e._id))})]}):(0,t.jsxs)("div",{className:"inline-flex bg-[rgba(255,208,208,1)] items-center gap-1 sm:gap-2 p-1 sm:p-2 justify-between shadow rounded border-1 border-green-400 max-w-full overflow-hidden",children:[(0,t.jsxs)("span",{className:"text-gray-800 font-medium text-xs sm:text-sm truncate max-w-[120px] sm:max-w-[150px]",children:[e.value," ",e.state?`(${e.state})`:""]}),(0,t.jsx)("button",{onClick:()=>k(e._id),className:"cursor-pointer text-black flex justify-center items-center bg-transparent flex-shrink-0",children:(0,t.jsx)(n,{className:"bg-transparent text-xs sm:text-sm"})})]})},e._id))})]})},d=[{label:"Profile For",api:"profile-for"},{label:"Religion",api:"religion"},{label:"Caste",api:"caste"},{label:"Communities",api:"communities"},{label:"Diet",api:"diet"},{label:"Color",api:"color"},{label:"Marital Status",api:"marital-status"},{label:"Mother Tongue",api:"mother-tongue"},{label:"Family Status",api:"family-status"},{label:"State",api:"state"},{label:"City",api:"city"},{label:"Education",api:"education"},{label:"Employed In",api:"employed-in"},{label:"Designation",api:"designation"}];function m(){let[e,l]=(0,a.useState)(""),r=d.filter(t=>t.label.toLowerCase().includes(e));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s,{onSearch:l}),(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 p-8 mt-[10px]",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.length>0?r.map((e,a)=>(0,t.jsx)(c,{title:e.label,apiPath:e.api},a)):(0,t.jsx)("p",{className:"text-center text-gray-500 col-span-3",children:"No matching results..."})})})]})}e.s(["default",()=>m],84819)},12142,(e,t,a)=>{let l="/profileDetails";(window.__NEXT_P=window.__NEXT_P||[]).push([l,()=>e.r(84819)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([l])})}]);