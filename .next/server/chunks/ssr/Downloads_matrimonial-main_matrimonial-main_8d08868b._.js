module.exports=[12711,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(17568),g=a.i(70776),h=b([g]);[g]=h.then?(await h)():h,a.s(["default",0,({setSearch:a,topSearch:b,setTopSearch:c})=>{let[h,i]=(0,e.useState)([]),[j,k]=(0,e.useState)(0),[l,m]=(0,e.useState)(!1),n=(0,e.useRef)(null),o="https://matrimonial-backend-7ahc.onrender.com",p=async()=>{try{let a=localStorage.getItem("token"),b=await fetch(`${o}/admin/profile`,{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();if(!c.success)return;let d=c.data;!0===d.notifications?(0,g.connectSocket)(d._id):(0,g.disconnectSocket)()}catch(a){console.log("Admin Pref Error:",a)}};(0,e.useEffect)(()=>{p()},[]);let q=async()=>{try{let a=localStorage.getItem("token"),b=await fetch(`${o}/api/notification/me`,{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();if(c.success){let a=c.data.reverse();i(a),k(a.filter(a=>!a.read).length)}}catch(a){console.log("Notification Fetch Error:",a)}};(0,e.useEffect)(()=>{q()},[]),(0,e.useEffect)(()=>{let a=(0,g.getSocket)();if(a)return console.log("ðŸŸ¢ Verification Page Socket Active"),a.on("new-notification",a=>{i(b=>[a,...b]),k(a=>a+1)}),a.on("one-read",({id:a})=>{i(b=>b.map(b=>b._id===a?{...b,read:!0}:b)),k(a=>Math.max(0,a-1))}),a.on("all-read",()=>{i(a=>a.map(a=>({...a,read:!0}))),k(0)}),a.on("delete-one",({id:a})=>{i(b=>b.filter(b=>b._id!==a)),k(a=>Math.max(0,a-1))}),a.on("delete-all",()=>{i([]),k(0)}),()=>{a.off("new-notification"),a.off("one-read"),a.off("all-read"),a.off("delete-one"),a.off("delete-all")}},[]);let r=async a=>{let b=localStorage.getItem("token");i(b=>b.map(b=>b._id===a?{...b,read:!0}:b)),k(a=>Math.max(0,a-1)),await fetch(`${o}/api/notification/mark-read/${a}`,{method:"PATCH",headers:{Authorization:`Bearer ${b}`}}),(0,g.getSocket)()?.emit("one-read",{id:a})},s=async()=>{let a=localStorage.getItem("token");i(a=>a.map(a=>({...a,read:!0}))),k(0),await fetch(`${o}/api/notification/mark-all`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`}}),(0,g.getSocket)()?.emit("all-read")},t=async a=>{let b=localStorage.getItem("token");i(b=>b.filter(b=>b._id!==a)),await fetch(`${o}/api/notification/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),(0,g.getSocket)()?.emit("delete-one",{id:a})},u=async()=>{let a=localStorage.getItem("token");i([]),k(0),await fetch(`${o}/api/notification/delete-all`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}}),(0,g.getSocket)()?.emit("delete-all")};return(0,e.useEffect)(()=>{let a=a=>{n.current&&!n.current.contains(a.target)&&m(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),(0,d.jsxs)("div",{className:"bg-gray-100 px-6 py-4 shadow-sm border-b fixed top-0 z-50 flex items-center justify-between",style:{left:"250px",width:"calc(100% - 250px)"},children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Verification Request"}),(0,d.jsxs)("div",{className:"flex items-center gap-5",children:[(0,d.jsxs)("div",{className:"flex items-center bg-white border border-gray-300 rounded-full px-4 py-2 w-[350px] shadow-sm",children:[(0,d.jsx)(f.Search,{className:"text-gray-600",size:18}),(0,d.jsx)("input",{type:"text",placeholder:"Search By User ID",className:"ml-2 w-full outline-none bg-transparent",value:b,onChange:b=>{c(b.target.value),a(b.target.value)}})]}),(0,d.jsxs)("div",{className:"relative",ref:n,children:[(0,d.jsxs)("div",{onClick:()=>m(!l),className:"cursor-pointer",children:[(0,d.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"#FFC107",children:(0,d.jsx)("path",{d:"M12 24c1.104 0 2-.897 2-2h-4c0 1.103.896 2 2 2zm6.707-5l1.293 1.293V21H4v-1.707L5.293 19H6v-7c0-3.309 2.691-6 6-6s6 2.691 6 6v7h.707z"})}),j>0&&(0,d.jsx)("span",{className:"absolute -top-1 -right-1 h-4 w-4 text-[10px] bg-red-600 text-white rounded-full flex items-center justify-center",children:j})]}),l&&(0,d.jsxs)("div",{className:"absolute right-0 mt-3 w-[350px] bg-white shadow-lg border rounded-lg p-3 z-50",children:[(0,d.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,d.jsx)("h2",{className:"font-semibold",children:"Notifications"}),(0,d.jsx)("button",{onClick:s,className:"text-blue-600 text-sm",children:"Mark all read"})]}),(0,d.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:0===h.length?(0,d.jsx)("p",{className:"text-center py-3 text-gray-500",children:"No notifications"}):h.map(a=>(0,d.jsxs)("div",{className:`p-3 border-b ${!a.read?"bg-yellow-50":""}`,children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("p",{className:"font-semibold",children:a.title}),(0,d.jsx)("button",{onClick:()=>t(a._id),className:"text-red-500 text-xs",children:"Delete"})]}),(0,d.jsx)("p",{className:"text-sm text-gray-700",children:a.message}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.createdAt).toLocaleString()}),!a.read&&(0,d.jsx)("button",{onClick:()=>r(a._id),className:"text-blue-600 text-xs mt-1",children:"Mark as read"})]},a._id))}),h.length>0&&(0,d.jsx)("button",{onClick:u,className:"w-full mt-2 py-2 text-sm text-red-600 border-t",children:"Delete All"})]})]})]})]})}]),c()}catch(a){c(a)}},!1),28774,a=>{"use strict";let b=(0,a.i(83532).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],28774)},31971,a=>{"use strict";let b=(0,a.i(83532).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],31971)},89294,a=>{"use strict";let b=(0,a.i(83532).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],89294)},10253,a=>{"use strict";let b=(0,a.i(83532).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],10253)},26481,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(17568),g=a.i(28774),h=a.i(31971),i=a.i(89294),j=a.i(10253),k=a.i(12711),l=a.i(31616),m=b([k]);[k]=m.then?(await m)():m;let o=({user:a})=>{let b=(a.firstName?.[0]||"").toUpperCase()+(a.lastName?.[0]||"").toUpperCase();return(0,d.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.profileImage?(0,d.jsx)("img",{src:a.profileImage,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover",alt:`${a.firstName} ${a.lastName}`}):(0,d.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-300 rounded-full flex items-center justify-center text-xs sm:text-sm font-semibold",children:b}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"font-semibold text-gray-900 text-xs sm:text-sm whitespace-nowrap",children:[a.firstName," ",a.lastName]}),(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:["#",a.id||a._id?.slice(-6)," / ",a.gender||"Not Mentioned"]})]})]})},p=({user:a,onClose:b})=>a?(0,d.jsx)("div",{id:"popup-bg",onClick:a=>{"popup-bg"===a.target.id&&b()},className:"fixed inset-0 bg-black/30 flex items-center justify-center z-[900] p-4",children:(0,d.jsxs)("div",{className:"bg-white w-full max-w-[280px] sm:w-[260px] rounded-xl shadow-xl p-4 animate-fadeIn",children:[(0,d.jsx)("h3",{className:"text-center font-semibold text-sm mb-3",children:"Documents Uploaded"}),(0,d.jsxs)("div",{className:"max-h-[300px] overflow-y-auto space-y-3",children:[a.adhaarCard?.frontImage&&(0,d.jsxs)("div",{className:"border rounded-xl shadow p-2",children:[(0,d.jsx)("img",{src:a.adhaarCard.frontImage,className:"w-full rounded-md",alt:"Aadhar Front"}),(0,d.jsx)("p",{className:"text-center text-xs mt-1 font-medium",children:"Aadhar Front"})]}),a.adhaarCard?.backImage&&(0,d.jsxs)("div",{className:"border rounded-xl shadow p-2",children:[(0,d.jsx)("img",{src:a.adhaarCard.backImage,className:"w-full rounded-md",alt:"Aadhar Back"}),(0,d.jsx)("p",{className:"text-center text-xs mt-1 font-medium",children:"Aadhar Back"})]})]}),(0,d.jsx)("button",{onClick:b,className:"w-full bg-black text-white rounded-md py-2 sm:py-1.5 mt-3 text-xs sm:text-xs",children:"Close"})]})}):null;function n(){let[a,b]=(0,e.useState)([]),[c,m]=(0,e.useState)(null),[n,q]=(0,e.useState)(""),[r,s]=(0,e.useState)(""),[t,u]=(0,e.useState)(""),[v,w]=(0,e.useState)("Status"),[x,y]=(0,e.useState)("Gender"),[z,A]=(0,e.useState)(!0),[B,C]=(0,e.useState)(""),[D,E]=(0,e.useState)("asc"),[F,G]=(0,e.useState)(1),[H,I]=(0,e.useState)({totalRequestsThisWeek:0,pendingVerification:0,approvedThisWeek:0,rejectedDueToMismatch:0});(0,e.useEffect)(()=>{(async()=>{try{let a=await fetch(`${l.API_URL}/admin/user-verify`),c=await a.json();b(c.data);let d=await fetch("https://matrimonial-backend-7ahc.onrender.com/admin/WeeklyRequestStats"),e=await d.json();I(e.data)}finally{A(!1)}})()},[]);let J=a=>{B===a?E("asc"===D?"desc":"asc"):(C(a),E("asc"))},K=(0,e.useMemo)(()=>{let b=[...a];return n&&(b=b.filter(a=>a.firstName?.toLowerCase().includes(n.toLowerCase())||a.lastName?.toLowerCase().includes(n.toLowerCase())||a._id?.includes(n))),"Status"!==v&&(b=b.filter(a=>a.adminApprovel===v)),"Gender"!==x&&(b=b.filter(a=>a.gender===x)),"name"===B&&b.sort((a,b)=>"asc"===D?`${a.firstName} ${a.lastName}`.localeCompare(`${b.firstName} ${b.lastName}`):`${b.firstName} ${b.lastName}`.localeCompare(`${a.firstName} ${a.lastName}`)),"date"===B&&b.sort((a,b)=>"asc"===D?new Date(a.createdAt)-new Date(b.createdAt):new Date(b.createdAt)-new Date(a.createdAt)),b},[a,n,v,x,B,D]),L=Math.ceil(K.length/5),M=Math.max(1,F-2),N=M+5-1;N>L&&(N=L,M=Math.max(1,N-5+1));let O=[];for(let a=M;a<=N;a++)O.push(a);let P=K.slice((F-1)*5,5*F);return(0,d.jsxs)("div",{className:"px-3 sm:px-4 md:px-6 py-4 sm:py-5 md:py-6",children:[(0,d.jsx)(k.default,{setSearch:q,topSearch:r,setTopSearch:s}),(0,d.jsxs)("div",{className:"pt-4 sm:pt-6",children:[(0,d.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 xl:gap-20 mb-8 sm:mb-10",children:[["Total Request This Week",H.totalRequestsThisWeek],["Pending Verification",H.pendingVerification],["Approved This Week",H.approvedThisWeek],["Rejected Due To Mismatch",H.rejectedDueToMismatch]].map(([a,b])=>(0,d.jsxs)("div",{className:"w-full bg-white border p-4 sm:p-5 md:p-6 rounded-xl sm:rounded-2xl shadow",children:[(0,d.jsx)("p",{className:"text-sm sm:text-base font-semibold text-center break-words",children:a}),(0,d.jsx)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-black text-center mt-2",children:b})]},a))}),(0,d.jsxs)("div",{className:"w-full mx-auto p-3 sm:p-4 md:p-5 border rounded-xl sm:rounded-2xl bg-white shadow",children:[(0,d.jsxs)("div",{className:"bg-gray-100 border rounded-xl p-3 sm:p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[(0,d.jsxs)("div",{className:"relative bg-white w-full sm:w-[300px]",children:[(0,d.jsx)(f.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 sm:w-5"}),(0,d.jsx)("input",{placeholder:"Search By User ID",value:t,onChange:a=>{u(a.target.value),q(a.target.value),G(1)},className:"w-full pl-9 sm:pl-10 pr-3 py-2 border rounded-lg text-xs sm:text-sm"})]}),(0,d.jsxs)("div",{className:"flex gap-2 sm:gap-3 w-full sm:w-auto",children:[(0,d.jsxs)("select",{value:v,onChange:a=>{w(a.target.value),G(1)},className:"border px-3 py-2 bg-gray-200 rounded-md text-xs sm:text-sm w-full sm:w-auto",children:[(0,d.jsx)("option",{children:"Status"}),(0,d.jsx)("option",{value:"approved",children:"Approved"}),(0,d.jsx)("option",{value:"pending",children:"Pending"}),(0,d.jsx)("option",{value:"reject",children:"Rejected"})]}),(0,d.jsxs)("select",{value:x,onChange:a=>{y(a.target.value),G(1)},className:"border px-3 py-2 bg-gray-200 rounded-md text-xs sm:text-sm w-full sm:w-auto",children:[(0,d.jsx)("option",{children:"Gender"}),(0,d.jsx)("option",{children:"Male"}),(0,d.jsx)("option",{children:"Female"})]})]})]}),(0,d.jsx)("div",{className:"overflow-x-auto mt-4 sm:mt-5 rounded-xl border",children:z?(0,d.jsx)("div",{className:"flex justify-center py-10",children:(0,d.jsx)(h.Loader2,{className:"animate-spin w-6 h-6 sm:w-8 sm:h-8"})}):(0,d.jsxs)("table",{className:"w-full text-xs sm:text-sm",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"bg-[#F7F7F7] text-gray-700",children:[(0,d.jsx)("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left font-semibold border-b whitespace-nowrap",children:(0,d.jsxs)("button",{onClick:()=>J("name"),className:"flex items-center gap-1 w-full text-left",children:["Reported User","name"===B?"asc"===D?"â–²":"â–¼":"â–²"]})}),(0,d.jsx)("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left font-semibold border-b whitespace-nowrap",children:(0,d.jsxs)("button",{onClick:()=>J("date"),className:"flex items-center gap-1 w-full text-left",children:["Report Date","date"===B?"asc"===D?"â–²":"â–¼":"â–²"]})}),(0,d.jsx)("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left font-semibold border-b whitespace-nowrap",children:"Documents Submitted"}),(0,d.jsx)("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left font-semibold border-b whitespace-nowrap",children:"Status"}),(0,d.jsx)("th",{className:"px-3 sm:px-4 py-2 sm:py-3 text-left font-semibold border-b whitespace-nowrap",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"divide-y",children:P.map(a=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-3 sm:px-4 py-2 sm:py-3",children:(0,d.jsx)(o,{user:a})}),(0,d.jsx)("td",{className:"px-3 sm:px-4 py-2 sm:py-3 whitespace-nowrap text-xs sm:text-sm",children:new Date(a.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),(0,d.jsx)("td",{className:"px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm",children:a.adhaarCard?.frontImage||a.adhaarCard?.backImage?"Aadhar Card":"No Document Submitted"}),(0,d.jsx)("td",{className:"px-3 sm:px-4 py-2 sm:py-3",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:`w-2 h-2 sm:w-3 sm:h-3 rounded-full ${{approved:"bg-green-500",pending:"bg-yellow-500",reject:"bg-red-500"}[a.adminApprovel]||"bg-gray-400"}`}),(0,d.jsx)("span",{className:{approved:"text-green-600",pending:"text-yellow-600",reject:"text-red-600"}[a.adminApprovel]||"text-gray-600",children:a.adminApprovel})]})}),(0,d.jsx)("td",{className:"px-3 sm:px-4 py-2 sm:py-3",children:(0,d.jsxs)("button",{onClick:()=>m(a),className:"flex items-center gap-1 text-blue-700 text-xs sm:text-sm",children:[(0,d.jsx)(g.Eye,{className:"w-3 h-3 sm:w-4 sm:h-4"})," View"]})})]},a._id))})]})}),(0,d.jsxs)("div",{className:"flex justify-center mt-4 items-center gap-2 sm:gap-3",children:[(0,d.jsxs)("button",{onClick:()=>G(a=>Math.max(1,a-1)),disabled:1===F,className:"text-gray-700 disabled:opacity-40 text-xs sm:text-sm flex items-center gap-1",children:[(0,d.jsx)(i.ChevronLeft,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"Prev"})]}),(0,d.jsx)("div",{className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:O.map(a=>(0,d.jsx)("button",{onClick:()=>G(a),className:`min-w-[28px] sm:min-w-[32px] h-7 sm:h-8 flex items-center justify-center ${F===a?"font-bold text-black underline":"text-gray-600"}`,children:a},a))}),(0,d.jsxs)("button",{onClick:()=>G(a=>Math.min(L,a+1)),disabled:F===L,className:"text-gray-700 disabled:opacity-40 text-xs sm:text-sm flex items-center gap-1",children:[(0,d.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,d.jsx)(j.ChevronRight,{className:"w-4 h-4"})]})]})]}),c&&(0,d.jsx)(p,{user:c,onClose:()=>m(null)})]})]})}a.s(["default",()=>n]),c()}catch(a){c(a)}},!1),37110,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(12711),g=a.i(26481),h=b([f,g]);[f,g]=h.then?(await h)():h,a.s(["default",0,()=>{let[a,b]=(0,e.useState)("");return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.default,{onSearch:a=>b(a)}),(0,d.jsx)("div",{className:"pt-[90px]",children:(0,d.jsx)(g.default,{search:a})})]})}]),c()}catch(a){c(a)}},!1),65271,a=>a.a(async(b,c)=>{try{var d=a.i(82032),e=a.i(5115),f=a.i(5813),g=a.i(12225),h=a.i(66508),i=a.i(37110),j=a.i(65725),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/verificationrequest/index",pathname:"/verificationrequest",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/verificationrequest/index",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=Downloads_matrimonial-main_matrimonial-main_8d08868b._.js.map