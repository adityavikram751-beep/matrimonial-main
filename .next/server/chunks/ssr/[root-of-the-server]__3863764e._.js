module.exports=[6944,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(52915),g=a.i(70776),h=b([g]);[g]=h.then?(await h)():h,a.s(["default",0,()=>{let[a,b]=(0,e.useState)([]),[c,h]=(0,e.useState)(0),[i,j]=(0,e.useState)(!1),k=(0,e.useRef)(null),l="https://matrimonial-backend-7ahc.onrender.com",m=async()=>{try{let a=localStorage.getItem("token"),b=await fetch(`${l}/admin/profile`,{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();if(!c.success)return;let d=c.data;!0===d.notifications?(0,g.connectSocket)(d._id):(0,g.disconnectSocket)()}catch(a){console.log("Admin Pref Error:",a)}};(0,e.useEffect)(()=>{m()},[]);let n=async()=>{try{let a=localStorage.getItem("token"),c=await fetch(`${l}/api/notification/me`,{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();if(d.success){let a=d.data.reverse();b(a),h(a.filter(a=>!a.read).length)}}catch(a){console.log("Fetch error:",a)}};(0,e.useEffect)(()=>{n()},[]),(0,e.useEffect)(()=>{let a=(0,g.getSocket)();if(a)return console.log("ðŸŸ¢ REAL-TIME NOTIFICATION LISTENER ACTIVE"),a.on("new-notification",a=>{b(b=>[a,...b]),h(a=>a+1)}),a.on("one-read",({id:a})=>{b(b=>b.map(b=>b._id===a?{...b,read:!0}:b)),h(a=>Math.max(0,a-1))}),a.on("all-read",()=>{b(a=>a.map(a=>({...a,read:!0}))),h(0)}),a.on("delete-one",({id:a})=>{b(b=>b.filter(b=>b._id!==a))}),a.on("delete-all",()=>{b([]),h(0)}),()=>{a.off("new-notification"),a.off("one-read"),a.off("all-read"),a.off("delete-one"),a.off("delete-all")}},[]),(0,e.useEffect)(()=>{let a=a=>{k.current&&!k.current.contains(a.target)&&j(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let o=async a=>{let c=localStorage.getItem("token");b(b=>b.map(b=>b._id===a?{...b,read:!0}:b)),h(a=>Math.max(0,a-1)),await fetch(`${l}/api/notification/mark-read/${a}`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`}}),(0,g.getSocket)()?.emit("one-read",{id:a})},p=async()=>{let a=localStorage.getItem("token");b(a=>a.map(a=>({...a,read:!0}))),h(0),await fetch(`${l}/api/notification/mark-all`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`}}),(0,g.getSocket)()?.emit("all-read")},q=async a=>{let c=localStorage.getItem("token");b(b=>b.filter(b=>b._id!==a)),await fetch(`${l}/api/notification/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}}),(0,g.getSocket)()?.emit("delete-one",{id:a})},r=async()=>{let a=localStorage.getItem("token");b([]),h(0),await fetch(`${l}/api/notification/delete-all`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}}),(0,g.getSocket)()?.emit("delete-all")};return(0,d.jsxs)("div",{className:"w-full bg-[#f5f5f5] py-3 px-4 border-b flex items-center justify-between",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-black",children:"Reported Content"}),(0,d.jsx)("div",{className:"flex items-center gap-4",children:(0,d.jsxs)("div",{className:"relative",ref:k,children:[(0,d.jsxs)("div",{className:"cursor-pointer relative",onClick:()=>{let a=!i;j(a),a&&p()},children:[(0,d.jsx)(f.Bell,{className:"h-7 w-7 text-yellow-500"}),c>0&&(0,d.jsx)("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-600 text-white  text-[10px] flex items-center justify-center rounded-full border-2 border-white",children:c})]}),i&&(0,d.jsxs)("div",{className:"absolute right-0 mt-3 w-[330px] bg-white shadow-lg border rounded-lg p-3 z-50",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,d.jsx)("h2",{className:"font-semibold",children:"Notifications"}),(0,d.jsx)("button",{onClick:p,className:"text-blue-600 text-sm",children:"Mark all read"})]}),(0,d.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:0===a.length?(0,d.jsx)("p",{className:"text-center text-gray-500 py-3",children:"No notifications"}):a.map(a=>(0,d.jsxs)("div",{className:`p-3 border-b flex justify-between items-start ${!a.read?"bg-yellow-50":""}`,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold",children:a.title}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:a.message}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.createdAt).toLocaleString()}),!a.read&&(0,d.jsx)("button",{onClick:()=>o(a._id),className:"text-blue-600 text-xs mt-1",children:"Mark as read"})]}),(0,d.jsx)("button",{onClick:()=>q(a._id),className:"text-red-500 text-sm",children:"Delete"})]},a._id))}),a.length>0&&(0,d.jsx)("button",{onClick:r,className:"w-full text-red-600 mt-2 py-2 text-sm border-t",children:"Delete All"})]})]})})]})}]),c()}catch(a){c(a)}},!1),2093,(a,b,c)=>{b.exports=a.x("styled-jsx/style.js",()=>require("styled-jsx/style.js"))},12041,a=>{"use strict";var b=a.i(8171),c=a.i(27669),d=a.i(17568),e=a.i(2093),f=a.i(31616);let g=({report:a,onClose:c,refreshReports:d})=>{if(!a)return null;let{reporter:g,reportedUser:h,title:i,description:j,image:k,status:l,createdAt:m}=a,n=async b=>{try{let e=await fetch(`${f.API_URL}/admin/report/status/${a._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"approve"===b?"approved":"rejected"})}),g=await e.json();console.log("API Response:",g),g.success?(alert(`Report has been ${"approve"===b?"approved":"rejected"}`),c(),d()):alert(g.message||"Something went wrong")}catch(a){console.error("Error in handleAction:",a),alert("Error processing action")}};return(0,b.jsxs)("div",{id:"backdrop",onClick:a=>{"backdrop"===a.target.id&&c()},className:"jsx-341b360f8ac9e9b0 fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4 py-10",children:[(0,b.jsxs)("div",{onClick:a=>a.stopPropagation(),className:"jsx-341b360f8ac9e9b0 relative bg-white/90 backdrop-blur-lg border border-white/40 rounded-3xl shadow-2xl max-w-xl w-full p-8 animate-scaleIn",children:[(0,b.jsxs)("div",{className:"jsx-341b360f8ac9e9b0 flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{className:"jsx-341b360f8ac9e9b0 flex items-center gap-2",children:[(0,b.jsx)("div",{className:`jsx-341b360f8ac9e9b0 w-3 h-3 rounded-full ${"rejected"===l?"bg-red-500":"approved"===l?"bg-green-500":"bg-yellow-400"}`}),(0,b.jsx)("span",{className:"jsx-341b360f8ac9e9b0 text-sm font-medium capitalize text-gray-800",children:l})]}),(0,b.jsxs)("span",{className:"jsx-341b360f8ac9e9b0 text-sm text-gray-600",children:["Reported on: ",new Date(m).toLocaleDateString()]})]}),(0,b.jsx)("div",{className:"jsx-341b360f8ac9e9b0 grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6",children:[h,g].map((a,c)=>(0,b.jsxs)("div",{className:"jsx-341b360f8ac9e9b0 bg-white rounded-xl border border-gray-200 p-5 flex flex-col items-center text-center hover:shadow-md transition",children:[(0,b.jsx)("img",{src:a?.avatar||a?.profileImage||"/default-profile.png",alt:"User",className:"jsx-341b360f8ac9e9b0 w-20 h-20 rounded-full border object-cover shadow"}),(0,b.jsx)("h3",{className:"jsx-341b360f8ac9e9b0 font-semibold text-lg text-gray-800 mt-3",children:a?.name||a?.fullName||"Unnamed User"}),(0,b.jsx)("p",{className:"jsx-341b360f8ac9e9b0 text-xs text-blue-500 mt-1",children:1===c?"Reporter":"Reported User"})]},c))}),(0,b.jsxs)("div",{className:"jsx-341b360f8ac9e9b0 mb-4",children:[(0,b.jsx)("h4",{className:"jsx-341b360f8ac9e9b0 font-semibold text-base mb-1",children:"Reason:"}),(0,b.jsx)("p",{className:"jsx-341b360f8ac9e9b0 text-sm text-gray-700 leading-relaxed bg-gray-100 border border-gray-200 rounded-lg p-4 mt-1",children:i}),(0,b.jsx)("h4",{className:"jsx-341b360f8ac9e9b0 font-semibold text-base mb-1 mt-4",children:"Description:"}),(0,b.jsx)("p",{className:"jsx-341b360f8ac9e9b0 text-sm text-gray-700 leading-relaxed bg-gray-100 border border-gray-200 rounded-lg p-4 mt-1",children:j})]}),k?.length>0&&(0,b.jsxs)("div",{className:"jsx-341b360f8ac9e9b0 mb-4",children:[(0,b.jsxs)("h4",{className:"jsx-341b360f8ac9e9b0 text-sm font-semibold text-gray-800 mb-2",children:["Attached Screenshot",k.length>1?"s":"",":"]}),(0,b.jsx)("div",{className:"jsx-341b360f8ac9e9b0 flex flex-wrap gap-2",children:k.map((a,c)=>(0,b.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"jsx-341b360f8ac9e9b0 text-sm text-blue-600 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded-md transition",children:["ðŸ“Ž Screenshot_",c+1,".jpg"]},c))})]}),(0,b.jsxs)("div",{className:"jsx-341b360f8ac9e9b0 flex justify-end gap-4 mt-8",children:[(0,b.jsx)("button",{onClick:()=>n("approve"),className:"jsx-341b360f8ac9e9b0 bg-green-500 hover:bg-green-600 text-white px-5 py-2 rounded-full font-semibold shadow",children:"Approve"}),(0,b.jsx)("button",{onClick:()=>n("reject"),className:"jsx-341b360f8ac9e9b0 bg-red-500 hover:bg-red-600 text-white px-5 py-2 rounded-full font-semibold shadow",children:"Reject"})]})]}),(0,b.jsx)(e.default,{id:"341b360f8ac9e9b0",children:".animate-scaleIn.jsx-341b360f8ac9e9b0{animation:.3s ease-out scaleIn}@keyframes scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"})]})},h=({active:a,direction:c})=>(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center ml-1 mt-[2px] leading-[0.4]",children:[(0,b.jsx)("div",{className:`w-2 h-2 rotate-45 border-t-2 border-l-2 ${a&&"asc"===c?"border-gray-700":"border-gray-400"}`}),(0,b.jsx)("div",{className:`w-2 h-2 rotate-45 border-b-2 border-r-2 mt-[3px] ${a&&"desc"===c?"border-gray-700":"border-gray-400"}`})]}),i=({report:a,currentPage:d,totalPages:e,setCurrentPage:f,refreshReports:i})=>{let[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)({key:null,direction:"asc"}),n=a=>{m(b=>({key:a,direction:b.key===a&&"asc"===b.direction?"desc":"asc"}))},o=(0,c.useMemo)(()=>l.key?[...a].sort((a,b)=>{let c="",d="";switch(l.key){case"reportedUser":c=a.reportedUser?.fullName||a.reportedUser?.name||"",d=b.reportedUser?.fullName||b.reportedUser?.name||"";break;case"reportDate":c=new Date(a.createdAt),d=new Date(b.createdAt);break;case"reporterUser":c=a.reporter?.fullName||a.reporter?.name||"",d=b.reporter?.fullName||b.reporter?.name||""}return c<d?"asc"===l.direction?-1:1:c>d?"asc"===l.direction?1:-1:0}):a,[a,l]),p=a=>a?.profileImage||"/default-profile.png",q=a=>a?.fullName||a?.name||"Unknown User",r=a=>a?.userId?`#${a.userId}`:"#------",s=a=>a?.gender||"N/A";return(0,b.jsxs)("div",{className:"bg-white  px-1",children:[(0,b.jsx)("div",{className:"w-full h-[1px] bg-gray-500 mb-2"}),(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:" border-b border-gray-500",children:[(0,b.jsx)("th",{className:"py-3 px-2 cursor-pointer font-semibold",onClick:()=>n("reportedUser"),children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["Reported User",(0,b.jsx)(h,{active:"reportedUser"===l.key,direction:l.direction})]})}),(0,b.jsx)("th",{className:"py-3 px-2 cursor-pointer font-semibold",onClick:()=>n("reportDate"),children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["Report Date",(0,b.jsx)(h,{active:"reportDate"===l.key,direction:l.direction})]})}),(0,b.jsx)("th",{className:"py-3 px-2 cursor-pointer font-semibold",onClick:()=>n("reporterUser"),children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["Reporter User",(0,b.jsx)(h,{active:"reporterUser"===l.key,direction:l.direction})]})}),(0,b.jsx)("th",{className:"py-3 px-2 font-semibold",children:"Reason"}),(0,b.jsx)("th",{className:"py-3 px-2 font-semibold",children:"Status"}),(0,b.jsx)("th",{className:"py-3 px-2 font-semibold",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:o.map(a=>{var c;return(0,b.jsxs)("tr",{className:"border-t border-gray-300 hover:bg-gray-50 transition",children:[(0,b.jsx)("td",{className:"py-[14px] px-3 align-middle",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("img",{src:p(a.reportedUser),className:"w-11 h-11 rounded-full object-cover"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:q(a.reportedUser)}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[r(a.reportedUser)," /"," ",s(a.reportedUser)]})]})]})}),(0,b.jsx)("td",{className:"py-[14px] px-3 align-middle",children:new Date(a.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})}),(0,b.jsx)("td",{className:"py-[14px] px-3 align-middle",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("img",{src:p(a.reporter),className:"w-11 h-11 rounded-full object-cover"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:q(a.reporter)}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[r(a.reporter)," / ",s(a.reporter)]})]})]})}),(0,b.jsx)("td",{className:"py-[14px] px-3 align-middle",children:a.title}),(0,b.jsx)("td",{className:"py-[14px] px-3 align-middle",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`w-3 h-3 rounded-full ${(c=a.status,"approved"===(c=c?.toLowerCase())?"bg-green-500":"pending"===c?"bg-yellow-500":"bg-red-500")}`}),(0,b.jsx)("span",{children:a.status})]})}),(0,b.jsx)("td",{className:"py-[14px] px-3 align-middle",children:(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)("button",{className:"text-gray-700",onClick:()=>k(a),children:"View"})})})]},a._id)})})]}),(0,b.jsxs)("div",{className:"flex justify-center items-center gap-3 mt-4 text-sm",children:[(0,b.jsx)("button",{disabled:1===d,onClick:()=>f(d-1),children:"â—€ Prev"}),[...Array(e)].map((a,c)=>(0,b.jsx)("button",{onClick:()=>f(c+1),className:`${d===c+1?"font-bold underline":"text-gray-600"}`,children:c+1},c)),(0,b.jsx)("span",{children:"....."}),(0,b.jsx)("button",{disabled:d===e,onClick:()=>f(d+1),children:"Next â–¶"})]}),j&&(0,b.jsx)(g,{report:j,onClose:()=>k(null),refreshReports:i})]})};a.s(["default",0,()=>{let[a,e]=(0,c.useState)([]),[g,h]=(0,c.useState)(""),[j,k]=(0,c.useState)("all"),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(1),[p,q]=(0,c.useState)(1),r=async()=>{try{let a=await fetch(`${f.API_URL}/admin/report-analize?search=${g}&status=${j}&gender=${l}&page=${n}&limit=10`),b=await a.json();e(b.reports||[]),q(b.totalPages||1)}catch(a){console.error("Failed to fetch reports:",a)}};(0,c.useEffect)(()=>{r()},[g,j,l,n]);let s=a.length,t=a.filter(a=>a.status?.toLowerCase()==="pending").length,u=a.filter(a=>a.status?.toLowerCase()==="reviewed"||a.status?.toLowerCase()==="approved").length,v=a.filter(a=>a.status?.toLowerCase()==="blocked").length;return(0,b.jsxs)("div",{className:"p-3 sm:p-4 md:p-5 lg:p-6",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 md:gap-6 px-2 sm:px-4 md:px-6 lg:px-10 mb-8 sm:mb-10",children:[{label:"Total Reports This Week",value:s},{label:"Pending Report Review",value:t},{label:"Action Taken",value:u},{label:"Blocked User",value:v}].map(({label:a,value:c})=>(0,b.jsxs)("div",{className:"bg-white border border-gray-300 rounded-xl shadow-sm p-4 sm:p-5 md:p-6 flex flex-col justify-center items-center",style:{minHeight:"140px"},children:[(0,b.jsx)("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-800 text-center px-2",children:a}),(0,b.jsx)("p",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mt-3 sm:mt-4",children:c>=1e3?(c/1e3).toFixed(1)+" K":c})]},a))}),(0,b.jsxs)("div",{className:"border mt-5 p-3 sm:p-4 bg-white border-gray-400 rounded-lg sm:rounded-xl",children:[(0,b.jsx)("div",{className:"bg-gray-100 p-2 sm:p-3 rounded-lg shadow-sm border border-gray-400 mb-2 sm:mb-3",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 sm:gap-4",children:[(0,b.jsxs)("div",{className:"relative w-full md:max-w-sm",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name or email",value:g,onChange:a=>{o(1),h(a.target.value)},className:"w-full pl-10 pr-4 py-2 bg-white border border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-200 text-sm sm:text-base"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[(0,b.jsxs)("select",{value:j,onChange:a=>{o(1),k(a.target.value)},className:"px-3 py-2 border bg-gray-300 border-gray-400 rounded-lg text-sm sm:text-base min-w-[120px]",children:[(0,b.jsx)("option",{value:"all",children:"Status"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"approved",children:"Approved"}),(0,b.jsx)("option",{value:"blocked",children:"Blocked"})]}),(0,b.jsxs)("select",{value:l,onChange:a=>{o(1),m(a.target.value)},className:"px-3 py-2 border bg-gray-300 border-gray-400 rounded-lg text-sm sm:text-base min-w-[120px]",children:[(0,b.jsx)("option",{value:"",children:"Gender"}),(0,b.jsx)("option",{value:"Male",children:"Male"}),(0,b.jsx)("option",{value:"Female",children:"Female"})]})]})]})}),(0,b.jsx)(i,{report:a,currentPage:n,totalPages:p,setCurrentPage:o,itemsPerPage:10,refreshReports:r})]})]})}],12041)},79625,a=>a.a(async(b,c)=>{try{var d=a.i(8171);a.i(27669);var e=a.i(6944),f=a.i(12041),g=b([e]);[e]=g.then?(await g)():g,a.s(["default",0,()=>(0,d.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,d.jsx)("div",{className:"shadow-md sticky top-0 z-30 bg-[#f5f5f5]",children:(0,d.jsx)(e.default,{})}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,d.jsx)(f.default,{})})]})]),c()}catch(a){c(a)}},!1),44572,a=>a.a(async(b,c)=>{try{var d=a.i(82032),e=a.i(5115),f=a.i(5813),g=a.i(12225),h=a.i(66508),i=a.i(79625),j=a.i(65725),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/reportedcontent/index",pathname:"/reportedcontent",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/reportedcontent/index",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__3863764e._.js.map